{% load static %}

<!DOCTYPE html>
<html style="font-size: 16px">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="utf-8" />
    <meta name="keywords" content="Men&amp;apos;s&nbsp;Fashion" />
    <meta name="description" content="" />
    <meta name="page_type" content="np-template-header-footer-from-plugin" />
    <title>Klothes</title>
    <!-- CSS only -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor"
      crossorigin="anonymous"
    />

    <link rel="stylesheet" href="{% static 'fashion/navbar.css'%}" />

    <link
      rel="stylesheet"
      href="{% static 'fashion/nicepage.css'%}"
      media="screen"
    />
    <link
      rel="stylesheet"
      href="{% static 'fashion/Page-7.css'%}"
      media="screen"
    />
    <link rel="stylesheet" href="{% static 'fashion/shirts.css'%}" />

    <script
      class="u-script"
      type="text/javascript"
      src="{% static 'fashion/jquery.js'%}"
      defer=""
    ></script>
    <script
      class="u-script"
      type="text/javascript"
      src="{% static 'fashion/nicepage.js'%}"
      defer=""
    ></script>

    <meta name="generator" content="Nicepage 4.10.5, nicepage.com" />
    <link
      id="u-theme-google-font"
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Playfair+Display:400,400i,500,500i,600,600i,700,700i,800,800i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i"
    />
    <link
      id="u-page-google-font"
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Lobster:400|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i"
    />

    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Organization",
        "name": ""
      }
    </script>

    <script>
      var user = "{{request.user}}";
      function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== "") {
          const cookies = document.cookie.split(";");
          for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i].trim();
            // Does this cookie string begin with the name we want?
            if (cookie.substring(0, name.length + 1) === name + "=") {
              cookieValue = decodeURIComponent(
                cookie.substring(name.length + 1)
              );
              break;
            }
          }
        }
        return cookieValue;
      }
      const csrftoken = getCookie("csrftoken");
    </script>

    <script>
      /* When the user clicks on the button,
toggle between hiding and showing the dropdown content */
      function myFunction() {
        document.getElementById("myDropdown").classList.toggle("show");
      }

      // Close the dropdown menu if the user clicks outside of it
      window.onclick = function (event) {
        if (!event.target.matches(".dropbtn")) {
          var dropdowns = document.getElementsByClassName("dropdown-content");
          var i;
          for (i = 0; i < dropdowns.length; i++) {
            var openDropdown = dropdowns[i];
            if (openDropdown.classList.contains("show")) {
              openDropdown.classList.remove("show");
            }
          }
        }
      };
    </script>
    <meta name="theme-color" content="#1f2438" />
    <meta property="og:title" content="Page 7" />
    <meta property="og:type" content="website" />
    <!-- NAVBAR -->
    <style>
      .logo {
        display: inline-block;
        font-size: 30px;
        color: white;
        margin-left: 110px;
        padding-top: 20px;
        padding-bottom: 20px;
      }
      .logo:hover {
        color: white;
      }
      .cardtotal {
        display: inline;
        color: red;
        margin-right: 30px;
      }
    </style>
  </head>
  <body
    style="background-color: #1f2438"
    data-home-page="Page-7.html"
    data-home-page-title="Page 7"
    class="u-body u-xl-mode"
  >
    <!-- NAVBAR -->
    <nav style="height: 80px; background-color: #1f2438">
      <b>
        <a class="logo" href="/">Klothes</a>
      </b>

      <div class="dropdown">
        <a href="/cart"
          ><img
            style="margin-right: -2px; margin-top: 23px"
            src="{% static 'fashion/images/cart.png'%}"
            width="30px"
            height="30px"
            alt=""
        /></a>
        <b> <p class="cardtotal">{{order.get_cart_items}}</p></b>

        <img
          style="margin-right: 3rem; margin-top: 25px"
          src="{% static 'fashion/images/user.png'%}"
          class="dropbtn"
          onclick="myFunction()"
          width="30px"
          height="30px"
          alt=""
        />

        <div style="margin-left: 40px" id="myDropdown" class="dropdown-content">
          <a href="/contact">Contact</a>
          <div id="eminem"><a href="/signup">Sign up</a></div>
          <div id="tupac"><a href="/login">Login</a></div>
          <div id="snoop"><a href="/logout">Logout</a></div>
        </div>
      </div>
    </nav>

    <!-- NAV BAR END -->

    <!-- main body -->
    {% block main %} {% endblock main%}
    <!-- main body end -->

    <footer
      style="margin-top: 100px"
      class="u-clearfix u-footer u-palette-1-base u-footer"
      id="sec-84f9"
    >
      <div
        class="u-border-1 u-border-white u-expanded-width u-line u-line-horizontal u-line-1"
      ></div>
      <div
        class="u-clearfix u-expanded-width-xs u-gutter-30 u-layout-wrap u-layout-wrap-1"
      >
        <div class="u-gutter-0 u-layout">
          <div class="u-layout-row">
            <div
              class="u-align-left u-container-style u-layout-cell u-left-cell u-size-20 u-size-20-md u-layout-cell-1"
            >
              <div class="u-container-layout u-container-layout-1">
                <h6 class="u-text u-text-1">About</h6>
                <p class="u-small-text u-text u-text-variant u-text-2">
                  join our team
                </p>
                <p class="u-small-text u-text u-text-variant u-text-3">
                  terms and conditions
                </p>
                <p class="u-small-text u-text u-text-variant u-text-4">
                  we respect your privacy
                </p>
                <p class="u-text u-text-5">Fees and payments</p>
                <p class="u-text u-text-6">Return and Refund policy</p>
                <p class="u-text u-text-7">Promotions Terms and Conditions</p>
              </div>
            </div>
            <div
              class="u-align-left u-container-style u-layout-cell u-size-20 u-size-20-md u-layout-cell-2"
            >
              <div class="u-container-layout u-container-layout-2">
                <h6 class="u-text u-text-8">Help</h6>
                <p class="u-small-text u-text u-text-variant u-text-9">
                  track your order <br />
                </p>
                <p class="u-text u-text-10">frequently asked questions</p>
                <p class="u-text u-text-11">Returns</p>
                <p class="u-text u-text-12">Payments</p>
                <p class="u-text u-text-13">customer care</p>
                <p class="u-text u-text-14">redeem your coupon</p>
              </div>
            </div>
            <div
              class="u-align-left u-container-style u-layout-cell u-right-cell u-size-20 u-size-20-md u-layout-cell-3"
            >
              <div class="u-container-layout u-container-layout-3">
                <h6 class="u-text u-text-15">Follow us</h6>
                <p class="u-small-text u-text u-text-variant u-text-16">
                  Facebook
                </p>
                <p class="u-text u-text-17">Instagram</p>
                <p class="u-text u-text-18">Twitter</p>
                <p class="u-text u-text-19">Pinterest</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <h3 class="u-align-center u-text u-text-20">
        <a href="/contact"> Contact us</a>
      </h3>
      <p class="u-align-center u-small-text u-text u-text-variant u-text-21">
        Thank you for shopping
      </p>
      <div
        class="u-align-left u-border-1 u-border-white u-line u-line-horizontal u-opacity u-opacity-25 u-line-2"
      ></div>
    </footer>

    <!-- JavaScript Bundle with Popper -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
      crossorigin="anonymous"
    ></script>
    <script>
      function updateUserOrder(productId, action) {
        console.log("User is logged in,sending data ..");
        var url = "/update_item";

        fetch(url, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "X-CSRFToken": csrftoken,
          },
          body: JSON.stringify({ productId: productId, action: action }),
        })
          .then((response) => {
            return response.json();
          })
          .then((data) => {
            console.log("data:", data);
            location.reload();
          });
      }

      var updateBtns = document.getElementsByClassName("update-cart");
      for (var i = 0; i < updateBtns.length; i++) {
        updateBtns[i].addEventListener("click", function () {
          var productId = this.dataset.product;
          var action = this.dataset.action;
          console.log("productId:", productId, "action:", action);
          console.log("user:", user);
          if (user === "AnonymousUser") {
            console.log("not logged in");
          } else {
            updateUserOrder(productId, action);
          }
        });
      }
    </script>

    <script>
      var user = "{{request.user}}";

      if (user === "AnonymousUser") {
        document.getElementById("snoop").style.display = "none";

        document.getElementById("eminem").style.display = "block";

        document.getElementById("tupac").style.display = "block";
      } else {
        console.log("logged in");
        document.getElementById("eminem").style.display = "none";
        document.getElementById("tupac").style.display = "none";
        document.getElementById("snoop").style.display = "block";
      }
    </script>
  </body>
</html>
